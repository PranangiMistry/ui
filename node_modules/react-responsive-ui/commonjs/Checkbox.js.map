{"version":3,"sources":["../source/Checkbox.js"],"names":["Checkbox","state","toggle","event","target","tagName","toLowerCase","focus","props","disabled","onChange","value","fallback","draw_checkmark","setState","javascript","next_props","was_toggled","path_style","undefined","previous_props","previous_state","error","indicateInvalid","multiline","children","style","className","markup","checkbox","ref","on_focus","on_blur","checkmark_svg_canvas_dimensions","render_checkmark","render_static","window","path","checkmark_svg_path","checkmark_svg_path_style","name","i","path_element","findDOMNode","animation","speed","easing","length","getTotalLength","strokeDasharray","strokeDashoffset","Math","floor","getBoundingClientRect","transition","WebkitTransition","MozTransition","svg_path_style","propTypes","string","bool","isRequired","func","node","object","defaultProps","fill","strokeLinecap","strokeLinejoin"],"mappings":"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","file":"Checkbox.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ReactDOM from 'react-dom'\r\nimport classNames from 'classnames'\r\n\r\n// http://tympanus.net/codrops/2013/10/15/animated-checkboxes-and-radio-buttons-with-svg/\r\n\r\nexport default class Checkbox extends PureComponent\r\n{\r\n\tstate = {}\r\n\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// HTML form field \"name\"\r\n\t\tname      : PropTypes.string,\r\n\r\n\t\t// `true`/`false`\r\n\t\tvalue     : PropTypes.bool.isRequired,\r\n\r\n\t\t// Set to `true` to enable multiline label\r\n\t\tmultiline : PropTypes.bool.isRequired,\r\n\r\n\t\t// Disables the checkbox\r\n\t\tdisabled  : PropTypes.bool.isRequired,\r\n\r\n\t\t// `onChange` handler\r\n\t\tonChange  : PropTypes.func.isRequired,\r\n\r\n\t\t// When `true` autofocuses the checkbox\r\n\t\tfocus     : PropTypes.bool.isRequired,\r\n\r\n\t\t// The label (text)\r\n\t\tchildren  : PropTypes.node,\r\n\r\n\t\t// (exotic use case)\r\n\t\t// Falls back to a plain HTML input\r\n\t\t// when javascript is disabled (e.g. Tor)\r\n\t\tfallback  : PropTypes.bool.isRequired,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle     : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tdisabled  : false,\r\n\t\tvalue     : false,\r\n\t\tfallback  : false,\r\n\t\tmultiline : false,\r\n\t\tfocus     : false\r\n\t}\r\n\r\n\t// Client side rendering, javascript is enabled\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tconst { value, fallback } = this.props\r\n\r\n\t\tif (value)\r\n\t\t{\r\n\t\t\tthis.draw_checkmark()\r\n\t\t}\r\n\r\n\t\tif (fallback)\r\n\t\t{\r\n\t\t\tthis.setState({ javascript: true })\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(next_props)\r\n\t{\r\n\t\tif (this.props.value !== next_props.value)\r\n\t\t{\r\n\t\t\t// Allows checkmark animation from now on\r\n\t\t\tthis.was_toggled = true\r\n\t\t}\r\n\r\n\t\tif (this.props.value && !next_props.value)\r\n\t\t{\r\n\t\t\tthis.setState({ path_style: undefined })\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(previous_props, previous_state)\r\n\t{\r\n\t\tif (this.props.value && !previous_props.value)\r\n\t\t{\r\n\t\t\tthis.draw_checkmark()\r\n\t\t}\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tvalue,\r\n\t\t\terror,\r\n\t\t\tindicateInvalid,\r\n\t\t\tmultiline,\r\n\t\t\tdisabled,\r\n\t\t\tchildren,\r\n\t\t\tfallback,\r\n\t\t\tstyle,\r\n\t\t\tclassName\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst markup =\r\n\t\t(\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classNames('rrui__checkbox',\r\n\t\t\t\t{\r\n\t\t\t\t\t'rrui__rich'               : fallback,\r\n\t\t\t\t\t'rrui__checkbox--checked'  : value,\r\n\t\t\t\t\t'rrui__checkbox--invalid'  : indicateInvalid && error,\r\n\t\t\t\t\t'rrui__checkbox--disabled' : disabled\r\n\t\t\t\t},\r\n\t\t\t\tclassName) }\r\n\t\t\t\tstyle={ style }>\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ classNames('rrui__input',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'rrui__input--multiline' : multiline\r\n\t\t\t\t\t}) }>\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ classNames('rrui__checkbox__checkbox',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'rrui__checkbox__checkbox--multiline' : multiline\r\n\t\t\t\t\t\t}) }>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={ ref => this.checkbox = ref }\r\n\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\tchecked={ value }\r\n\t\t\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\t\t\tonChange={ this.toggle }\r\n\t\t\t\t\t\t\tonFocus={ this.on_focus }\r\n\t\t\t\t\t\t\tonBlur={ this.on_blur }\r\n\t\t\t\t\t\t\tclassName=\"rrui__checkbox__input\"/>\r\n\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={ classNames('rrui__checkbox__box',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__checkbox__box--no-label' : !children\r\n\t\t\t\t\t\t\t}) }/>\r\n\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tviewBox={ checkmark_svg_canvas_dimensions }\r\n\t\t\t\t\t\t\tclassName=\"rrui__checkbox__checkmark\">\r\n\t\t\t\t\t\t\t{ value ? this.render_checkmark() : null }\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{ children &&\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\tonClick={ this.toggle }\r\n\t\t\t\t\t\t\tclassName={ classNames('rrui__checkbox__label',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__checkbox__label--multiline' : multiline\r\n\t\t\t\t\t\t\t}) }>\r\n\t\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{ indicateInvalid && error && <div className=\"rrui__input-error\">{ error }</div> }\r\n\r\n\t\t\t\t{ fallback && !this.state.javascript && this.render_static() }\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\treturn markup\r\n\t}\r\n\r\n\trender_checkmark()\r\n\t{\r\n\t\tconst { path_style } = this.state\r\n\r\n\t\t// For a web browser\r\n\t\tif (typeof window !== 'undefined')\r\n\t\t{\r\n\t\t\treturn <path\r\n\t\t\t\tref={ ref => this.path = ref }\r\n\t\t\t\td={ checkmark_svg_path }\r\n\t\t\t\tstyle={ path_style || checkmark_svg_path_style }/>\r\n\t\t}\r\n\r\n\t\t// For Node.js\r\n\t\treturn <path\r\n\t\t\td={ checkmark_svg_path }\r\n\t\t\tstyle={ checkmark_svg_path_style }/>\r\n\t}\r\n\r\n\t// supports disabled javascript\r\n\trender_static()\r\n\t{\r\n\t\tconst { name, value, focus, disabled, children } = this.props\r\n\r\n\t\tconst markup =\r\n\t\t(\r\n\t\t\t<div className=\"rrui__rich__fallback\">\r\n\t\t\t\t{/* This checkbox will be sent as either \"on\" or `undefined` */}\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\tname={ name }\r\n\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\tdefaultChecked={ value }\r\n\t\t\t\t\tautoFocus={ focus }/>\r\n\r\n\t\t\t\t<label className=\"rrui__checkbox__label rrui__checkbox__label--fallback\">\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\treturn markup\r\n\t}\r\n\r\n\tdraw_checkmark()\r\n\t{\r\n\t\tconst i = 0\r\n\r\n\t\tconst path_element = ReactDOM.findDOMNode(this.path)\r\n\r\n\t\tconst animation = { speed : .1, easing : 'ease-in-out' }\r\n\r\n\t\tconst path_style = {}\r\n\r\n\t\tconst length = path_element.getTotalLength() // in pixels\r\n\t\tpath_style.strokeDasharray = `${length} ${length}`\r\n\r\n\t\tpath_element.style.strokeDashoffset = Math.floor(length) - 1\r\n\r\n\t\t// Trigger a layout so styles are calculated & the browser\r\n\t\t// picks up the starting position before animating\r\n\t\tpath_element.getBoundingClientRect()\r\n\r\n\t\t// Define our transition\r\n\t\t// (skips the animation on the initial page render on the client side)\r\n\t\tif (this.was_toggled)\r\n\t\t{\r\n\t\t\tpath_style.transition =\r\n\t\t\tpath_element.style.WebkitTransition =\r\n\t\t\tpath_element.style.MozTransition =\r\n\t\t\t\t`stroke-dashoffset ${animation.speed}s ${animation.easing} ${i * animation.speed}s`\r\n\t\t}\r\n\r\n\t\t// Go\r\n\t\tpath_style.strokeDashoffset = 0\r\n\r\n\t\tthis.setState({ path_style: { ...path_style, ...svg_path_style } })\r\n\t}\r\n\r\n\tfocus()\r\n\t{\r\n\t\tReactDOM.findDOMNode(this.checkbox).focus()\r\n\t}\r\n\r\n\ttoggle = (event) =>\r\n\t{\r\n\t\t// If a link was clicked - don't treat it as a checkbox label click.\r\n\t\t// (is used for things like \"✓ Read and accepted the <a>licence agreement</a>\")\r\n\t\tif (event.target.tagName.toLowerCase() === 'a')\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.focus()\r\n\r\n\t\tconst { disabled, onChange, value } = this.props\r\n\r\n\t\tif (disabled)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// if (value)\r\n\t\t// {\r\n\t\t// \tthis.setState({ path_style: undefined })\r\n\t\t// }\r\n\r\n\t\tonChange(!value)\r\n\t}\r\n}\r\n\r\nconst checkmark_svg_canvas_dimensions = '0 0 100 100'\r\nconst checkmark_svg_path = ['M16.667,62.167c3.109,5.55,7.217,10.591,10.926,15.75 c2.614,3.636,5.149,7.519,8.161,10.853c-0.046-0.051,1.959,2.414,2.692,2.343c0.895-0.088,6.958-8.511,6.014-7.3 c5.997-7.695,11.68-15.463,16.931-23.696c6.393-10.025,12.235-20.373,18.104-30.707C82.004,24.988,84.802,20.601,87,16']\r\n\r\nconst checkmark_svg_path_style =\r\n{\r\n\tfill           : 'transparent',\r\n\tstrokeLinecap  : 'round',\r\n\tstrokeLinejoin : 'round'\r\n}\r\n\r\nconst svg_path_style =\r\n{\r\n\tstrokeLinecap  : 'round',\r\n\tstrokeLinejoin : 'round',\r\n\tfill           : 'none'\r\n}"]}