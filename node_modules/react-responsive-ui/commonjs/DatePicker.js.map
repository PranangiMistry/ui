{"version":3,"sources":["../source/DatePicker.js"],"names":["DatePicker","state","expanded","selected_day","on_input_focus","event","onFocus","props","expand","value","format","onToggle","setState","month","undefined","text_value","format_date","normalize_value","Date","on_key_down_in_container","ctrlKey","altKey","shiftKey","metaKey","keyCode","preventDefault","input","focus","collapse","on_input_key_down","on_input_change","onChange","previous_value","noon","utc","disabledDays","target","trim","trim_invalid_part","parse_date","dayMatchesModifier","getTime","calendar","showMonth","on_day_click","disabled","getFullYear","getMonth","getDate","convert_to_utc_timezone","on_calendar_key_down","document_clicked","container","findDOMNode","contains","on_month_selected","on_blur","onBlur","relatedTarget","currentTarget","_event","stopPropagation","document","addEventListener","querySelectorAll","button","removeAttribute","removeEventListener","indicateInvalid","error","id","selectYearsIntoPast","selectYearsIntoFuture","firstDayOfWeek","required","label","placeholder","closeButtonLabel","className","style","captionElement","ref","should_indicate_invalid","propTypes","string","number","isRequired","instanceOf","func","bool","name","oneOfType","object","array","defaultProps","parse_date_custom","date","format_date_custom","year","extract","current_year","current_year_century","day","console","isNaN","template","piece","starts_at","indexOf","corresponds_to_template","parseInt","slice","length","i","is_a_digit","text","replace","pad_with_zeroes","String","target_length","YearMonthSelector","localeUtils","selectedDay","from_year","to_year","years","Array","selected_year","unshift","push","months","getMonths","on_change","parentNode","firstChild","lastChild","markup","map","getTimezoneOffset"],"mappings":"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","file":"DatePicker.js","sourcesContent":["// Derived from `react-day-picker` example\r\n// http://react-day-picker.js.org/examples/?overlay\r\n\r\nimport React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ReactDOM from 'react-dom'\r\nimport DayPicker, { ModifiersUtils } from 'react-day-picker'\r\nimport classNames from 'classnames'\r\n\r\n// // Moment.js takes 161 KB of space (minified) which is too much\r\n// import moment from 'moment'\r\n\r\n// // `date-fns` would be a better alternative to moment\r\n// // but it doesn't support templated date parsing\r\n// // until version `2.0.0` of it is released.\r\n// // https://github.com/date-fns/date-fns/issues/347\r\n// import parse_date_date_fns from 'date-fns/parse'\r\n// import format_date_date_fns from 'date-fns/format'\r\n\r\nexport default class DatePicker extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// An optional label placed on top of the input field\r\n\t\tlabel : PropTypes.string,\r\n\r\n\t\t// `<input/>` placeholder\r\n\t\tplaceholder : PropTypes.string,\r\n\r\n\t\t// `0` means \"Sunday\", `1` means \"Monday\", etc.\r\n\t\t// (is `0` by default)\r\n\t\tfirstDayOfWeek : PropTypes.number.isRequired,\r\n\r\n\t\t// Date format. Only supports `DD`, `MM`, `YY` and `YYYY` for now (to reduce bundle size).\r\n\t\t// Can support custom localized formats, perhaps, when `date-fns@2` is released.\r\n\t\t// (is US `MM/DD/YYYY` by default)\r\n\t\tformat : PropTypes.string.isRequired,\r\n\t\t// format : PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\r\n\r\n\t\t// Internationalization\r\n\t\t// locale : PropTypes.string,\r\n\r\n\t\t// The Date `value`\r\n\t\tvalue : PropTypes.instanceOf(Date),\r\n\r\n\t\t// Writes new `value`.\r\n\t\t// The `value` is in the user's time zone and the time is `00:00`.\r\n\t\tonChange : PropTypes.func.isRequired,\r\n\r\n\t\t// Is called when the date picker is either collapsed or expanded\r\n\t\tonToggle : PropTypes.func,\r\n\r\n\t\t// Is called when the input is focused\r\n\t\tonFocus : PropTypes.func,\r\n\r\n\t\t// Is called when the input is blurred.\r\n\t\t// This `onBlur` interceptor is a workaround for `redux-form`,\r\n\t\t// so that it gets the parsed `value` in its `onBlur` handler,\r\n\t\t// not the formatted text.\r\n\t\tonBlur : PropTypes.func,\r\n\r\n\t\t// Disables the input\r\n\t\tdisabled : PropTypes.bool,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired : PropTypes.bool.isRequired,\r\n\r\n\t\t// HTML `<input/>` `name` attribute\r\n\t\tname : PropTypes.string,\r\n\r\n\t\t// `react-day-picker`'s `disabledDays`.\r\n\t\t// http://react-day-picker.js.org/examples/disabled\r\n\t\tdisabledDays : PropTypes.oneOfType\r\n\t\t([\r\n\t\t\tPropTypes.object,\r\n\t\t\tPropTypes.func,\r\n\t\t\tPropTypes.array\r\n\t\t]),\r\n\r\n\t\t// How much years back can a user navigate using the year `<select/>`\r\n\t\tselectYearsIntoPast : PropTypes.number,\r\n\r\n\t\t// How much years forward can a user navigate using the year `<select/>`\r\n\t\tselectYearsIntoFuture : PropTypes.number,\r\n\r\n\t\t// Whether dates being selected should be in UTC+0 timezone.\r\n\t\t// (is `false` by default)\r\n\t\tutc : PropTypes.bool.isRequired,\r\n\r\n\t\t// Whether to set time to 12:00 for dates being selected.\r\n\t\t// (is `true` by default)\r\n\t\tnoon : PropTypes.bool.isRequired,\r\n\r\n\t\t// \"Close\" button title for fullscreen mode on mobile devices\r\n\t\tcloseButtonLabel : PropTypes.string.isRequired,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// Default US format\r\n\t\tformat : 'MM/DD/YYYY',\r\n\r\n\t\t// locale: 'en-US',\r\n\t\tfirstDayOfWeek : 0,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired : false,\r\n\r\n\t\t// Whether dates being selected should be in UTC+0 timezone\r\n\t\tutc : false,\r\n\r\n\t\t// Whether to set time to 12:00 for dates being selected\r\n\t\tnoon : true,\r\n\r\n\t\t// \"Close\" button title for fullscreen mode on mobile devices\r\n\t\tcloseButtonLabel : 'Close'\r\n\t}\r\n\r\n\tstate =\r\n\t{\r\n\t\texpanded     : false,\r\n\t\tselected_day : null\r\n\t}\r\n\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tdocument.addEventListener('click', this.document_clicked)\r\n\r\n\t\t// Set \"previous\" and \"next\" buttons untabbable\r\n\t\t// so that a Tab out of the `<input/>` field\r\n\t\t// moves cursor not inside to these buttons\r\n\t\t// but rather to the next form input.\r\n\t\tconst calendar = ReactDOM.findDOMNode(this.calendar)\r\n\t\tfor (const button of calendar.querySelectorAll('.DayPicker-NavButton'))\r\n\t\t{\r\n\t\t\tbutton.removeAttribute('tabindex')\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tdocument.removeEventListener('click', this.document_clicked)\r\n\t}\r\n\r\n\ton_input_focus = (event) =>\r\n\t{\r\n\t\tconst { onFocus } = this.props\r\n\r\n\t\tif (onFocus)\r\n\t\t{\r\n\t\t\tonFocus(event)\r\n\t\t}\r\n\r\n\t\tthis.expand()\r\n\t}\r\n\r\n\texpand = () =>\r\n\t{\r\n\t\tconst { expanded } = this.state\r\n\t\tconst { value, format, onToggle } = this.props\r\n\r\n\t\tif (expanded)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\tmonth : undefined\r\n\t\t},\r\n\t\t() =>\r\n\t\t{\r\n\t\t\tif (onToggle)\r\n\t\t\t{\r\n\t\t\t\tonToggle(true)\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState\r\n\t\t\t({\r\n\t\t\t\ttext_value : format_date(value, format),\r\n\t\t\t\texpanded   : true,\r\n\t\t\t\tmonth      : value ? normalize_value(value) : new Date()\r\n\t\t\t})\r\n\r\n\t\t\t// Could also focus on the calendar controls upon expansion\r\n\t\t\t// but it's configured to collapse on Tab event.\r\n\t\t\t// , () =>\r\n\t\t\t// {\r\n\t\t\t// \tReactDOM.findDOMNode(this.calendar).focus()\r\n\t\t\t// })\r\n\t\t})\r\n\t}\r\n\r\n\t// Would have used `onBlur={...}` event handler here\r\n\t// with `if (container.contains(event.relatedTarget))` condition,\r\n\t// but it doesn't work in IE in React.\r\n\t// https://github.com/facebook/react/issues/3751\r\n\t//\r\n\t// Therefore, using the hacky `document.onClick` handlers\r\n\t// and this `onKeyDown` Tab handler\r\n\t// until `event.relatedTarget` support is consistent in React.\r\n\t//\r\n\ton_key_down_in_container = (event) =>\r\n\t{\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst { expanded } = this.state\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// Collapse on Escape or on Tab out\r\n\t\t\tcase 27:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\tthis.input.focus()\r\n\t\t\tcase 9:\r\n\t\t\t\tif (expanded)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.collapse()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\ton_input_key_down = (event) =>\r\n\t{\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst { expanded } = this.state\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// Collapse on Escape and on Enter\r\n\t\t\tcase 27:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\tcase 13:\r\n\t\t\t\tif (expanded)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.collapse()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\r\n\t\t\t// Toggle the calendar on Spacebar\r\n\t\t\tcase 32:\r\n\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\tif (expanded)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.collapse()\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.expand()\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\r\n\r\n\t\t\t// Collapse the calendar (if expanded) on Up arrow\r\n\t\t\tcase 38:\r\n\t\t\t\tif (expanded)\r\n\t\t\t\t{\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tthis.collapse()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\r\n\t\t\t// Expand the calendar (if collapsed) on Down arrow\r\n\t\t\tcase 40:\r\n\t\t\t\tif (!expanded)\r\n\t\t\t\t{\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tthis.expand()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\t// Hides the day picker calendar and cancels textual date editing\r\n\tcollapse = () =>\r\n\t{\r\n\t\tconst { onToggle } = this.props\r\n\r\n\t\tif (onToggle)\r\n\t\t{\r\n\t\t\tonToggle(false)\r\n\t\t}\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\ttext_value : undefined,\r\n\t\t\texpanded   : false\r\n\t\t})\r\n\r\n\t\t// `onChange` fires on calendar day `click`\r\n\t\t// but the `value` hasn't neccessarily been updated yet,\r\n\t\t// therefore, say, if `value` was not set\r\n\t\t// and a user select a day in the calendar\r\n\t\t// then the `value` is technically still `undefined`\r\n\t\t// so can't just set `state.text_value = format_date(value)` here.\r\n\t\t//\r\n\t\t// Analogous, `setState({ text_value })` has been called\r\n\t\t// in calendar day `onClick` but `state.text_value`\r\n\t\t// hasn't neccessarily been updated yet.\r\n\t\t//\r\n\t\t// Still must validate (recompute) `text_value` on `<input/>` blur\r\n\t\t// in cases when a user manually typed in a date and then tabbed away.\r\n\t}\r\n\r\n\ton_input_change = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tonChange,\r\n\t\t\tvalue: previous_value,\r\n\t\t\tformat,\r\n\t\t\tnoon,\r\n\t\t\tutc,\r\n\t\t\tdisabledDays\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tlet { value } = event.target\r\n\r\n\t\tvalue = value.trim()\r\n\r\n\t\t// When the date is erased, reset it.\r\n\t\tif (!value)\r\n\t\t{\r\n\t\t\t// Call `onChange` only if `value` did actually change\r\n\t\t\tif (previous_value)\r\n\t\t\t{\r\n\t\t\t\tonChange(undefined)\r\n\t\t\t}\r\n\r\n\t\t\treturn this.setState({ text_value: '' })\r\n\t\t}\r\n\r\n\t\tvalue = trim_invalid_part(value, format)\r\n\r\n\t\tconst selected_day = parse_date(value, format, noon, utc)\r\n\r\n\t\t// If the date input is unparseable,\r\n\t\t// or if it's one of the disabled days,\r\n\t\t// then don't change the selected date.\r\n\t\tif (!selected_day ||\r\n\t\t\tdisabledDays && ModifiersUtils.dayMatchesModifier(selected_day, disabledDays))\r\n\t\t{\r\n\t\t\treturn this.setState({ text_value: value })\r\n\t\t}\r\n\r\n\t\t// Call `onChange` only if `value` did actually change\r\n\t\tif (!previous_value || previous_value.getTime() !== selected_day.getTime())\r\n\t\t{\r\n\t\t\tonChange(selected_day)\r\n\t\t}\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\ttext_value: value\r\n\t\t},\r\n\t\t() => this.calendar.showMonth(selected_day))\r\n\t}\r\n\r\n\ton_day_click = (selected_day, { disabled }) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tformat,\r\n\t\t\tonChange,\r\n\t\t\tvalue: previous_value,\r\n\t\t\tnoon,\r\n\t\t\tutc\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If the day clicked is disabled then do nothing.\r\n\t\tif (disabled)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// https://github.com/gpbl/react-day-picker/issues/473\r\n\t\t// By default the `selected_day` has time\r\n\t\t// set to `12:00` of the current time zone.\r\n\t\t// These extra 12 hours do make sense and\r\n\t\t// do help make things less weird.\r\n\t\t//\r\n\t\t// These extra 12 hours are a hack to make things\r\n\t\t// a little bit less weird when rendering parsed dates.\r\n\t\t// E.g. if a date `Jan 1st, 2017` gets parsed as\r\n\t\t// `Jan 1st, 2017, 00:00 UTC+0` (England) then when displayed in the US\r\n\t\t// it would show up as `Dec 31st, 2016, 19:00 UTC-05` (Austin, Texas).\r\n\t\t// That would be weird for a website user.\r\n\t\t// Therefore this extra 12-hour padding is added\r\n\t\t// to compensate for the most weird cases like this\r\n\t\t// for adjacent countries / neighbours / same continent countries.\r\n\t\t//\r\n\t\t// So `selected_day` is in the user's time zone and the time is `12:00`.\r\n\r\n\t\tif (!noon)\r\n\t\t{\r\n\t\t\t// Here I strip those 12 hours from the `selected_day`\r\n\t\t\t// so the time becomes `00:00` in the user's time zone.\r\n\t\t\t//\r\n\t\t\t// (`selected_day` is the date in the user's time zone)\r\n\t\t\t// (`selected_day.getDate()` returns the day in the user's time zone)\r\n\t\t\t// (`new Date(year, month, day)` creates a date in the user's time zone)\r\n\t\t\t//\r\n\t\t\tselected_day = new Date(selected_day.getFullYear(), selected_day.getMonth(), selected_day.getDate())\r\n\t\t}\r\n\r\n\t\tif (utc)\r\n\t\t{\r\n\t\t\t// Converts timezone to UTC while preserving the same time\r\n\t\t\tselected_day = convert_to_utc_timezone(selected_day)\r\n\t\t}\r\n\r\n\t\t// `onChange` fires but the `value`\r\n\t\t// hasn't neccessarily been updated yet.\r\n\t\t//\r\n\t\t// Call `onChange` only if `value` did actually change.\r\n\t\t//\r\n\t\tif (!previous_value || previous_value.getTime() !== selected_day.getTime())\r\n\t\t{\r\n\t\t\tonChange(selected_day)\r\n\t\t}\r\n\r\n\t\t// this.setState\r\n\t\t// ({\r\n\t\t// \t// text_value: format_date(selected_day, format),\r\n\t\t// \texpanded: false\r\n\t\t// })\r\n\r\n\t\t// // Blur the input so that the calendar\r\n\t\t// // will open upon a future click on it.\r\n\t\t// // (doesn't work in mobile browsers)\r\n\t\t// this.input.blur()\r\n\r\n\t\t// Hide the calendar\r\n\t\tthis.collapse()\r\n\r\n\t\t// Focus the `<input/>`\r\n\t\tthis.input.focus()\r\n\t}\r\n\r\n\ton_calendar_key_down = (event) =>\r\n\t{\r\n\t\tswitch (event)\r\n\t\t{\r\n\t\t\t// The next year is selected on \"Up\" arrow,\r\n\t\t\t// so `.preventDefault()` it to prevent page scrolling.\r\n\t\t\t// https://github.com/gpbl/react-day-picker/issues/273\r\n\t\t\tcase 38:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\treturn\r\n\r\n\t\t\t// The previous year is selected on \"Down\" arrow,\r\n\t\t\t// so `.preventDefault()` it to prevent page scrolling.\r\n\t\t\t// https://github.com/gpbl/react-day-picker/issues/273\r\n\t\t\tcase 40:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\tdocument_clicked = (event) =>\r\n\t{\r\n\t\tconst container = ReactDOM.findDOMNode(this.container)\r\n\r\n\t\tif (container.contains(event.target))\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.collapse()\r\n\t}\r\n\r\n\ton_month_selected = (month) =>\r\n\t{\r\n\t\tthis.setState({ month })\r\n\t}\r\n\r\n\t// Whether should indicate that the input value is invalid\r\n\tshould_indicate_invalid()\r\n\t{\r\n\t\tconst { indicateInvalid, error } = this.props\r\n\r\n\t\treturn indicateInvalid && error\r\n\t}\r\n\r\n\t// This handler is a workaround for `redux-form`\r\n\ton_blur = (event) =>\r\n\t{\r\n\t\tconst { onBlur, value } = this.props\r\n\r\n\t\t// If clicked on an expanded calendar then don't trigger \"blur\" event\r\n\t\tif (event.relatedTarget && event.currentTarget.contains(event.relatedTarget))\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// This `onBlur` interceptor is a workaround for `redux-form`,\r\n\t\t// so that it gets the right (parsed, not the formatted one)\r\n\t\t// `event.target.value` in its `onBlur` handler.\r\n\t\tif (onBlur)\r\n\t\t{\r\n\t\t\tconst _event =\r\n\t\t\t{\r\n\t\t\t\t...event,\r\n\t\t\t\ttarget:\r\n\t\t\t\t{\r\n\t\t\t\t\t...event.target,\r\n\t\t\t\t\tvalue\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// For `redux-form` event detection.\r\n\t\t\t// https://github.com/erikras/redux-form/blob/v5/src/events/isEvent.js\r\n\t\t\t_event.stopPropagation = event.stopPropagation\r\n\t\t\t_event.preventDefault  = event.preventDefault\r\n\r\n\t\t\tonBlur(_event)\r\n\t\t}\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tid,\r\n\t\t\tformat,\r\n\t\t\tvalue,\r\n\t\t\terror,\r\n\t\t\tdisabledDays,\r\n\t\t\tselectYearsIntoPast,\r\n\t\t\tselectYearsIntoFuture,\r\n\t\t\tfirstDayOfWeek,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\tlabel,\r\n\t\t\tplaceholder,\r\n\t\t\tcloseButtonLabel,\r\n\t\t\tclassName,\r\n\t\t\tstyle\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\ttext_value,\r\n\t\t\texpanded,\r\n\t\t\tmonth\r\n\t\t}\r\n\t\t= this.state\r\n\r\n\t\t// `<input type=\"date\"/>` renders a browser-specific date picker\r\n\t\t// which can not be turned off using a simple HTML attribute\r\n\t\t// and also date format is not customizable,\r\n\t\t// therefore just using `<input type=\"text\"/>` here\r\n\r\n\t\tlet captionElement\r\n\r\n\t\tif (selectYearsIntoPast || selectYearsIntoFuture)\r\n\t\t{\r\n\t\t\tcaptionElement = <YearMonthSelector\r\n\t\t\t\tselectedDay={ value }\r\n\t\t\t\tonChange={ this.on_month_selected }\r\n\t\t\t\tselectYearsIntoPast={ selectYearsIntoPast }\r\n\t\t\t\tselectYearsIntoFuture={ selectYearsIntoFuture } />\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={ ref => this.container = ref }\r\n\t\t\t\tonKeyDown={ this.on_key_down_in_container }\r\n\t\t\t\tonBlur={ this.on_blur }\r\n\t\t\t\tclassName={ classNames('rrui__date-picker', className,\r\n\t\t\t\t{\r\n\t\t\t\t\t'rrui__date-picker--disabled' : disabled\r\n\t\t\t\t}) }\r\n\t\t\t\tstyle={ style }>\r\n\r\n\t\t\t\t<div className=\"rrui__input\">\r\n\t\t\t\t\t<div className=\"rrui__date-picker__icon\" />\r\n\r\n\t\t\t\t\t{/* This layer can intercept taps on mobile devices\r\n\t\t\t\t\t    to prevent the keyboard from showing\r\n\t\t\t\t\t    when the date picker is in fullscreen mode */}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tonClick={ this.expand }\r\n\t\t\t\t\t\tclassName=\"rrui__date-picker__input-overlay\"/>\r\n\r\n\t\t\t\t\t{/* Date input */}\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tid={ id }\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tref={ ref => this.input = ref }\r\n\t\t\t\t\t\tplaceholder={ placeholder || (typeof format === 'string' ? format : undefined) }\r\n\t\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\t\tvalue={ text_value !== undefined ? text_value : format_date(value, format) }\r\n\t\t\t\t\t\tonKeyDown={ this.on_input_key_down }\r\n\t\t\t\t\t\tonChange={ this.on_input_change }\r\n\t\t\t\t\t\tonFocus={ this.on_input_focus }\r\n\t\t\t\t\t\tonClick={ this.expand }\r\n\t\t\t\t\t\tclassName={ classNames\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t'rrui__input-element',\r\n\t\t\t\t\t\t\t'rrui__input-field',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__input-field--invalid'  : this.should_indicate_invalid(),\r\n\t\t\t\t\t\t\t\t'rrui__input-field--disabled' : disabled\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t) }/>\r\n\r\n\t\t\t\t\t{/* Label */}\r\n\t\t\t\t\t{/* (this label is placed after the `<input/>`\r\n\t\t\t\t\t     to utilize the CSS `+` selector) */}\r\n\t\t\t\t\t{ label &&\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\thtmlFor={ id }\r\n\t\t\t\t\t\t\tclassName={ classNames('rrui__input-label',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__input-label--required' : required && !value,\r\n\t\t\t\t\t\t\t\t'rrui__input-label--invalid'  : this.should_indicate_invalid()\r\n\t\t\t\t\t\t\t}) }>\r\n\t\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* <DayPicker/> doesn't support `style` property */}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ classNames\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t'rrui__expandable',\r\n\t\t\t\t\t\t\t'rrui__expandable--overlay',\r\n\t\t\t\t\t\t\t'rrui__shadow',\r\n\t\t\t\t\t\t\t'rrui__date-picker__collapsible',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__expandable--expanded' : expanded\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t) }>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={ classNames\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t'rrui__expandable__content',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// CSS selector performance optimization\r\n\t\t\t\t\t\t\t\t\t'rrui__expandable__content--expanded'   : expanded\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }>\r\n\t\t\t\t\t\t\t<DayPicker\r\n\t\t\t\t\t\t\t\tref={ ref => this.calendar = ref }\r\n\t\t\t\t\t\t\t\tmonth={ month }\r\n\t\t\t\t\t\t\t\tfirstDayOfWeek={ firstDayOfWeek }\r\n\t\t\t\t\t\t\t\tonDayClick={ this.on_day_click }\r\n\t\t\t\t\t\t\t\tonKeyDown={ this.on_calendar_key_down }\r\n\t\t\t\t\t\t\t\tselectedDays={ normalize_value(value) }\r\n\t\t\t\t\t\t\t\tdisabledDays={ disabledDays }\r\n\t\t\t\t\t\t\t\tcaptionElement={ captionElement }\r\n\t\t\t\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t\t\t\t\tclassName=\"rrui__date-picker__calendar\" />\r\n\r\n\t\t\t\t\t\t\t{/* \"Close\" button for fullscreen mode on mobile devices */}\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tonClick={ this.collapse }\r\n\t\t\t\t\t\t\t\tclassName={ classNames('rrui__button-reset', 'rrui__date-picker__close') }>\r\n\t\t\t\t\t\t\t\t{ closeButtonLabel }\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Error message */}\r\n\t\t\t\t{ this.should_indicate_invalid() &&\r\n\t\t\t\t\t<div className=\"rrui__input-error\">{ error }</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// Parses a text value into a `Date` provided a `format`.\r\n// The date returned is in the user's time zone and the time is `12:00`.\r\nfunction parse_date(text_value, format, noon, utc)\r\n{\r\n\tif (!text_value)\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\t// Custom\r\n\treturn parse_date_custom(text_value, format, noon, utc)\r\n\r\n\t// // Using `date-fns`\r\n\t// const date = parse_date_date_fns(text_value)\r\n\r\n\t// if (isNaN(date.getTime()))\r\n\t// {\r\n\t// \treturn\r\n\t// }\r\n\r\n\t// return date\r\n\r\n\t// // Using `Moment.js`\r\n\t// const moment_day = moment(text_value, format, true)\r\n\r\n\t// if (!moment_day.isValid())\r\n\t// {\r\n\t// \treturn\r\n\t// }\r\n\r\n\t// return moment_day.toDate()\r\n}\r\n\r\n// (Moment.js)\r\n// Formats a `Date` into a text value provided a `format`\r\nfunction format_date(date, format)\r\n{\r\n\tif (!date)\r\n\t{\r\n\t\treturn ''\r\n\t}\r\n\r\n\t// Custom\r\n\treturn format_date_custom(date, format)\r\n\r\n\t// // Using `date-fns`\r\n\t// return format_date_date_fns(date, format)\r\n\r\n\t// // Using `Moment.js`\r\n\t// return moment(date).format(format)\r\n}\r\n\r\n// Parses a text value into a `Date` provided a `format`.\r\n// The date returned is in the user's time zone and the time is `00:00`.\r\nfunction parse_date_custom(string, format, noon, utc)\r\n{\r\n\tif (!string)\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\tlet year = extract(string, format, 'YYYY')\r\n\r\n\tif (year === undefined)\r\n\t{\r\n\t\tyear = extract(string, format, 'YY')\r\n\r\n\t\tif (year !== undefined)\r\n\t\t{\r\n\t\t\t// Current year in the user's time zone.\r\n\t\t\tconst current_year = new Date().getFullYear()\r\n\t\t\tconst current_year_century = current_year - current_year % 100\r\n\t\t\tyear += current_year_century\r\n\t\t}\r\n\t}\r\n\r\n\tconst month = extract(string, format, 'MM')\r\n\tconst day   = extract(string, format, 'DD')\r\n\r\n\tif (year === undefined || month === undefined || day === undefined)\r\n\t{\r\n\t\treturn console.error(`Couldn't parse date. Most likely an invalid date entered (manually). Otherwise it could be an unsupported date format: ${format} (only DD, MM, YY and YYYY literals are supported).`)\r\n\t}\r\n\r\n\t// The date created is in the user's time zone and the time is `00:00`.\r\n\tlet date = new Date\r\n\t(\r\n\t\tyear,\r\n\t\tmonth - 1,\r\n\t\tday,\r\n\t\tnoon ? 12 : undefined\r\n\t)\r\n\r\n\tif (utc)\r\n\t{\r\n\t\t// Converts timezone to UTC while preserving the same time\r\n\t\tdate = convert_to_utc_timezone(date)\r\n\t}\r\n\r\n\t// If `new Date()` returns \"Invalid Date\"\r\n\t// (sometimes it does)\r\n\tif (isNaN(date.getTime()))\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\treturn date\r\n}\r\n\r\nfunction extract(string, template, piece)\r\n{\r\n\tconst starts_at = template.indexOf(piece)\r\n\r\n\tif (starts_at < 0)\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\t// Check overall sanity\r\n\tif (!corresponds_to_template(string, template))\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\tconst number = parseInt(string.slice(starts_at, starts_at + piece.length))\r\n\r\n\tif (!isNaN(number))\r\n\t{\r\n\t\treturn number\r\n\t}\r\n}\r\n\r\nfunction corresponds_to_template(string, template)\r\n{\r\n\tif (string.length !== template.length)\r\n\t{\r\n\t\treturn false\r\n\t}\r\n\r\n\tlet i = 0\r\n\twhile (i < string.length)\r\n\t{\r\n\t\tconst is_a_digit = string[i] >= '0' && string[i] <= '9'\r\n\r\n\t\tif (!is_a_digit)\r\n\t\t{\r\n\t\t\tif (string[i] !== template[i])\r\n\t\t\t{\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif (template[i] !== 'D' && template[i] !== 'M' && template[i] !== 'Y')\r\n\t\t\t{\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ti++\r\n\t}\r\n\r\n\treturn true\r\n}\r\n\r\n// console.log(corresponds_to_template('1231231234', 'DD.MM.YYYY'))\r\n// console.log(corresponds_to_template('12.12.1234', 'DD.MM.YYYY'))\r\n\r\n// console.log(parse_date_custom('fadsfasd', 'DD.MM.YYYY'))\r\n// console.log(parse_date_custom('28.02.2017', 'DD.MM.YYYY'))\r\n// console.log(parse_date_custom('12/02/2017', 'MM/DD/YYYY'))\r\n// console.log(parse_date_custom('99/99/2017', 'MM/DD/YYYY'))\r\n// console.log(parse_date_custom('02/03/17', 'MM/DD/YY'))\r\n\r\nfunction format_date_custom(date, format)\r\n{\r\n\tif (!(date instanceof Date))\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\tconst day   = date.getDate()\r\n\tconst month = date.getMonth() + 1\r\n\tconst year  = date.getFullYear()\r\n\r\n\tlet text = format\r\n\t\t.replace('DD', pad_with_zeroes(String(day),   2))\r\n\t\t.replace('MM', pad_with_zeroes(String(month), 2))\r\n\r\n\tif (text.indexOf('YYYY') >= 0)\r\n\t{\r\n\t\treturn text.replace('YYYY', pad_with_zeroes(String(year), 4))\r\n\t}\r\n\r\n\tif (text.indexOf('YY') >= 0)\r\n\t{\r\n\t\treturn text.replace('YY', pad_with_zeroes(String(year % 100), 2))\r\n\t}\r\n}\r\n\r\n// console.log(format_date_custom(new Date(), 'DD.MM.YYYY'))\r\n// console.log(format_date_custom(new Date(), 'MM/DD/YYYY'))\r\n// console.log(format_date_custom(new Date(), 'MM/DD/YY'))\r\n\r\nfunction pad_with_zeroes(string, target_length)\r\n{\r\n\twhile (string.length < target_length)\r\n\t{\r\n\t\tstring = '0' + string\r\n\t}\r\n\r\n\treturn string\r\n}\r\n\r\n// // Intl date formatting\r\n//\r\n// const dateFormatters = {}\r\n//\r\n// function format_dateIntl(date, locale) {\r\n//   if (typeof Intl === 'undefined') {\r\n//     return date.toISOString()\r\n//   }\r\n//\r\n//   const key = typeof locale === 'string' ? locale : locale.join(',')\r\n//\r\n//   if (!dateFormatters[key]) {\r\n//     dateFormatters[key] = new Intl.DateTimeFormat(locale, {\r\n//       day: '2-digit',\r\n//       month: '2-digit',\r\n//       year: 'numeric'\r\n//     })\r\n//   }\r\n//\r\n//   return dateFormatters[key]\r\n// }\r\n\r\n// Converts `null` to `undefined`\r\n// (specially for `knex.js`)\r\nfunction normalize_value(value)\r\n{\r\n\tif (value === null)\r\n\t{\r\n\t\treturn undefined\r\n\t}\r\n\r\n\treturn value\r\n}\r\n\r\nfunction trim_invalid_part(value, format)\r\n{\r\n\tlet i = 0\r\n\twhile (i < value.length && i < format.length)\r\n\t{\r\n\t\tif (format[i] === 'D' || format[i] === 'M' || format[i] === 'Y')\r\n\t\t{\r\n\t\t\tif (!(value[i] >= '0' && value[i] <= '9'))\r\n\t\t\t{\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (format[i] !== value[i])\r\n\t\t{\r\n\t\t\tbreak\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\treturn value.slice(0, i)\r\n}\r\n\r\n// console.log(trim_invalid_part('fasdf', 'DD.MM.YYYY'))\r\n// console.log(trim_invalid_part('01.01.1234', 'DD.MM.YYYY'))\r\n// console.log(trim_invalid_part('01/02/34', 'MM/DD/YY'))\r\n// console.log(trim_invalid_part('01/a2/34', 'MM/DD/YY'))\r\n\r\n// http://react-day-picker.js.org/examples/?yearNavigation\r\n// Component will receive date, locale and localeUtils props\r\nfunction YearMonthSelector({ date, localeUtils, onChange, selectYearsIntoPast, selectYearsIntoFuture, selectedDay })\r\n{\r\n\t// The current year in the user's time zone.\r\n\tconst current_year = new Date().getFullYear()\r\n\r\n\tlet from_year = selectYearsIntoPast   ? current_year - selectYearsIntoPast   : current_year\r\n\tconst to_year = selectYearsIntoFuture ? current_year + selectYearsIntoFuture : current_year\r\n\r\n\tconst years = new Array(to_year - from_year + 1)\r\n\r\n\tlet i = 0\r\n\twhile (from_year + i <= to_year)\r\n\t{\r\n\t\tyears[i] = from_year + i\r\n\t\ti++\r\n\t}\r\n\r\n\t// Makes sure the currently selected year is in the list\r\n\t// to not confuse the user.\r\n\tif (selectedDay)\r\n\t{\r\n\t\tconst selected_year = selectedDay.getFullYear()\r\n\r\n\t\tif (selected_year < from_year)\r\n\t\t{\r\n\t\t\tyears.unshift(selected_year)\r\n\t\t}\r\n\t\telse if (selected_year > to_year)\r\n\t\t{\r\n\t\t\tyears.push(selected_year)\r\n\t\t}\r\n\t}\r\n\r\n\tconst months = localeUtils.getMonths()\r\n\r\n\tfunction on_change(event)\r\n\t{\r\n\t\tconst month = event.target.parentNode.firstChild.value\r\n\t\tconst year  = event.target.parentNode.lastChild.value\r\n\r\n\t\t// The date created is in the user's time zone and the time is `00:00`.\r\n\t\t// The `day` is `undefined` which means the first one of the `month`.\r\n\t\tonChange(new Date(year, month))\r\n\t}\r\n\r\n\tconst markup =\r\n\t(\r\n\t\t<div className=\"DayPicker-Caption\">\r\n\t\t\t<div className=\"DayPicker-CaptionSelects\">\r\n\t\t\t\t<select\r\n\t\t\t\t\tonChange={ on_change }\r\n\t\t\t\t\tvalue={ date.getMonth() }\r\n\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t\tclassName=\"DayPicker-MonthSelect\">\r\n\r\n\t\t\t\t\t{ months.map((month, i) => (\r\n\t\t\t\t\t\t<option key={ i } value={ i }>\r\n\t\t\t\t\t\t\t{ month }\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t)) }\r\n\t\t\t\t</select>\r\n\r\n\t\t\t\t<select\r\n\t\t\t\t\tonChange={ on_change }\r\n\t\t\t\t\tvalue={ date.getFullYear() }\r\n\t\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\t\tclassName=\"DayPicker-YearSelect\">\r\n\r\n\t\t\t\t\t{ years.map((year, i) => (\r\n\t\t\t\t\t\t<option key={ i } value={ year }>\r\n\t\t\t\t\t\t\t{ year }\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t)) }\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn markup\r\n}\r\n\r\n// Converts timezone to UTC while preserving the same time\r\nfunction convert_to_utc_timezone(date)\r\n{\r\n\t// Doesn't account for leap seconds but I guess that's ok\r\n\t// given that javascript's own `Date()` does not either.\r\n\t// https://www.timeanddate.com/time/leap-seconds-background.html\r\n\t//\r\n\t// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset\r\n\t//\r\n\treturn new Date(date.getTime() - date.getTimezoneOffset() * 60 * 1000)\r\n}"]}