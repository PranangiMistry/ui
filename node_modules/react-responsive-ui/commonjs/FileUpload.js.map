{"version":3,"sources":["../source/FileUpload.js"],"names":["File_upload","on_file_selected","bind","on_click","on_input_click","on_input_change","event","stopPropagation","props","action","multiple","data","target","files","value","disabled","onClick","preventDefault","file_upload","click","style","className","children","markup","ref","input_style","propTypes","func","isRequired","bool","node","string","object","display"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;IAEqBA,W;;;AA0BpB,wBACA;AAAA;;AAAA;;AAGC,QAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,OAAxB;AACA,QAAKC,QAAL,GAAwB,MAAKA,QAAL,CAAcD,IAAd,OAAxB;AACA,QAAKE,cAAL,GAAwB,MAAKA,cAAL,CAAoBF,IAApB,OAAxB;AACA,QAAKG,eAAL,GAAwB,MAAKA,eAAL,CAAqBH,IAArB,OAAxB;AAND;AAOC;;;;iCAEcI,K,EACf;AACCA,SAAMC,eAAN;AACA;;;kCAEeD,K,EAChB;AACC,QAAKL,gBAAL,CAAsBK,KAAtB;AACA;;;mCAEgBA,K,EACjB;AAAA,gBAC8B,KAAKE,KADnC;AAAA,OACSC,MADT,UACSA,MADT;AAAA,OACiBC,QADjB,UACiBA,QADjB;;;AAGC,OAAIC,OAAOL,MAAMM,MAAN,CAAaC,KAAxB;;AAEA,OAAI,CAACH,QAAL,EACA;AACCC,WAAOA,KAAK,CAAL,CAAP;AACA;;AAEDF,UAAOE,IAAP;;AAEA;AACA;AACA;AACAL,SAAMM,MAAN,CAAaE,KAAb,GAAqB,IAArB;AACA;;;2BAEQR,K,EACT;AAAA,iBAC+B,KAAKE,KADpC;AAAA,OACSO,QADT,WACSA,QADT;AAAA,OACmBC,OADnB,WACmBA,OADnB;;;AAGC,OAAID,QAAJ,EACA;AACC,WAAOT,MAAMW,cAAN,EAAP;AACA;;AAED,OAAID,OAAJ,EACA;AACCA;AACA;;AAED,QAAKE,WAAL,CAAiBC,KAAjB;AACA;;;2BAGD;AAAA;;AAAA,iBAQG,KAAKX,KARR;AAAA,OAGEO,QAHF,WAGEA,QAHF;AAAA,OAIEK,KAJF,WAIEA,KAJF;AAAA,OAKEC,SALF,WAKEA,SALF;AAAA,OAMEC,QANF,WAMEA,QANF;;;AAUC,OAAMC,SAEL;AAAA;AAAA;AACC,YAAQH,KADT;AAEC,gBAAY,0BAAW,mBAAX,EAAgCC,SAAhC,EACZ;AACC,qCAAgCN;AADjC,MADY,CAFb;AAMC,cAAU,KAAKZ,QANhB;AAQC;AACC,WAAK,MADN;AAEC,UAAM;AAAA,aAAO,OAAKe,WAAL,GAAmBM,IAA1B;AAAA,MAFP;AAGC,UAAI,YAHL;AAIC,YAAQC,WAJT;AAKC,cAAU,KAAKtB,QALhB;AAMC,eAAW,KAAKE,eANjB,GARD;AAgBGiB;AAhBH,IAFD;;AAsBA,UAAOC,MAAP;AACA;;;;;AApHmBvB,W,CAEb0B,S,GACP;AACC;AACAjB,SAAY,oBAAUkB,IAAV,CAAeC,UAF5B;;AAIC;AACAlB,WAAY,oBAAUmB,IALvB;;AAOC;AACAd,WAAY,oBAAUc,IARvB;;AAUC;AACAb,UAAY,oBAAUW,IAXvB;;AAaC;AACAL,WAAY,oBAAUQ,IAdvB;;AAgBC;AACAT,YAAY,oBAAUU,MAjBvB;;AAmBC;AACAX,QAAY,oBAAUY;AApBvB,C;kBAHoBhC,W;;;AAuHrB,IAAMyB,cACN;AACCQ,UAAS;AADV,CADA","file":"FileUpload.js","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nexport default class File_upload extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// On file chosen handler\r\n\t\taction    : PropTypes.func.isRequired,\r\n\r\n\t\t// Allows choosing multiple files if `true`\r\n\t\tmultiple  : PropTypes.bool,\r\n\r\n\t\t// Disables the file input\r\n\t\tdisabled  : PropTypes.bool,\r\n\r\n\t\t// `onClick` handler\r\n\t\tonClick   : PropTypes.func,\r\n\r\n\t\t// The clickable area, like \"Click here to choose a file\"\r\n\t\tchildren  : PropTypes.node,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle     : PropTypes.object\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper()\r\n\r\n\t\tthis.on_file_selected = this.on_file_selected.bind(this)\r\n\t\tthis.on_click         = this.on_click.bind(this)\r\n\t\tthis.on_input_click   = this.on_input_click.bind(this)\r\n\t\tthis.on_input_change  = this.on_input_change.bind(this)\r\n\t}\r\n\r\n\ton_input_click(event)\r\n\t{\r\n\t\tevent.stopPropagation()\r\n\t}\r\n\r\n\ton_input_change(event)\r\n\t{\r\n\t\tthis.on_file_selected(event)\r\n\t}\r\n\r\n\ton_file_selected(event)\r\n\t{\r\n\t\tconst { action, multiple } = this.props\r\n\r\n\t\tlet data = event.target.files\r\n\r\n\t\tif (!multiple)\r\n\t\t{\r\n\t\t\tdata = data[0]\r\n\t\t}\r\n\r\n\t\taction(data)\r\n\r\n\t\t// reset the selected file\r\n\t\t// so that onChange would trigger again\r\n\t\t// even with the same file\r\n\t\tevent.target.value = null\r\n\t}\r\n\r\n\ton_click(event)\r\n\t{\r\n\t\tconst { disabled, onClick } = this.props\r\n\r\n\t\tif (disabled)\r\n\t\t{\r\n\t\t\treturn event.preventDefault()\r\n\t\t}\r\n\r\n\t\tif (onClick)\r\n\t\t{\r\n\t\t\tonClick()\r\n\t\t}\r\n\r\n\t\tthis.file_upload.click()\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tdisabled,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst markup =\r\n\t\t(\r\n\t\t\t<div\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames('rrui__file-upload', className,\r\n\t\t\t\t{\r\n\t\t\t\t\t'rrui__file-upload--disabled' : disabled\r\n\t\t\t\t}) }\r\n\t\t\t\tonClick={ this.on_click }>\r\n\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tref={ ref => this.file_upload = ref }\r\n\t\t\t\t\tkey=\"file_input\"\r\n\t\t\t\t\tstyle={ input_style }\r\n\t\t\t\t\tonClick={ this.on_click }\r\n\t\t\t\t\tonChange={ this.on_input_change }/>\r\n\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\treturn markup\r\n\t}\r\n}\r\n\r\nconst input_style =\r\n{\r\n\tdisplay: 'none'\r\n}"]}